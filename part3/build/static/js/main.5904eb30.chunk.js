(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var o=t(15),c=t.n(o),a=t(6),s=t(3),r=t(1),u=t(0),l=function(e){var n=e.value,t=e.onChange;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Search"}),Object(u.jsx)("input",{value:n,onChange:t})]})},i=function(e){var n=e.newName,t=e.handleName,o=e.newPhone,c=e.handlePhone,a=e.handleSubmit,s=e.text;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:s}),Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:["name:",Object(u.jsx)("input",{value:n,onChange:t}),"phone: ",Object(u.jsx)("input",{value:o,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:a,children:"add"})})]})]})},d=function(e){var n=e.personToShow,t=e.text,o=e.handleDelete;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:t}),console.log(n),n.length>0?n.map((function(e){return Object(u.jsxs)("p",{children:[e.name," ",e.number,Object(u.jsx)("button",{onClick:function(){return o(e)},children:"Delete"})]},e.id)})):null]})},h=function(e){var n=e.message,t=e.notificationOf;if(null===n)return null;return Object(u.jsx)("div",{style:"success"===t?{color:"green",fontStyle:"italic",fontSize:16}:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:Object(u.jsx)("p",{children:n})})},j=t(4),f=t.n(j),b="api/persons",O=function(){return f.a.get(b).then((function(e){return e.data}))},p=function(e){return f.a.post(b,e)},m=function(e){return f.a.delete("".concat(b,"/").concat(e)).then(console.log("deleted"))},g=function(e){return console.log(e),f.a.put("".concat(b,"/").concat(e.id),e).then((function(e){return e.data}))},x=(t(39),function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),j=Object(s.a)(c,2),f=j[0],b=j[1],x=Object(r.useState)(""),v=Object(s.a)(x,2),w=v[0],S=v[1],T=Object(r.useState)(""),C=Object(s.a)(T,2),y=C[0],k=C[1],D=Object(r.useState)(null),P=Object(s.a)(D,2),L=P[0],N=P[1],E=Object(r.useState)(null),z=Object(s.a)(E,2),A=z[0],B=z[1];Object(r.useEffect)((function(){O().then((function(e){console.log("this is the get all response",e),o(t.concat(e))}))}),[]);var J=""===y?t:t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})),I=function(e){var n=e.id,c=e.name;window.confirm("Do you want to delete ".concat(c))&&(m(n).catch((function(e){N("The contact ".concat(c," didn't exist in database")),B("error"),setTimeout((function(){B(null),N(null)}),5e3)})),o(t.filter((function(e){return e.id!==n}))))};return Object(u.jsxs)("div",{children:[Object(u.jsx)(l,{onChange:function(e){k(e.target.value)},value:y}),""!==y&&Object(u.jsx)(d,{personToShow:J,text:"search result",handleDelete:I}),Object(u.jsx)(h,{message:L,notificationOf:A}),Object(u.jsx)(i,{text:"Add Contacts",newName:f,handleName:function(e){b(e.target.value)},newPhone:w,handlePhone:function(e){S(e.target.value)},handleSubmit:function(e){if(e.preventDefault(),function(e){console.log(e);var n=t.map((function(e){return console.log(e),e.name.toLowerCase()}));console.log(n);var o=n.includes(f.toLowerCase());return console.log(o),o}(f)){if(window.confirm("".concat(f," is already added, do you want to update de phone instead?"))){var n=t.find((function(e){return e.name===f})),c=Object(a.a)(Object(a.a)({},n),{},{number:w});console.log("this old",n),console.log("this new",c),console.log("this persons",t),g(c).then((function(e){console.log(e);var n=t.map((function(n){return n.name!==f?n:e}));console.log("this what UPDATE",n),o(n),console.log("this persons2",t),N("The contact ".concat(c.name," was updated successfully")),B("success"),setTimeout((function(){B(null),N(null)}),5e3)})).catch((function(e){N("There was an error ".concat(e.response.data)),B("error"),setTimeout((function(){B(null),N(null)}),5e3)}))}}else{var s={name:f,number:w};p(s).then((function(e){o(t.concat(e.data)),b(""),S(""),N("The new contact ".concat(s.name," was added successfully")),B("success"),setTimeout((function(){B(null),N(null)}),5e3)})).catch((function(e){N("".concat(e.response.data)),B("error"),setTimeout((function(){B(null),N(null)}),5e3)}))}}}),Object(u.jsx)(d,{personToShow:t,text:"Phonebook",handleDelete:I})]})});c.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5904eb30.chunk.js.map